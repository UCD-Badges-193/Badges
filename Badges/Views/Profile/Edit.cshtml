@model Badges.Models.Profile.ProfileEditModel

@{
    ViewBag.Title = "Your Profile";
}

<h2>Edit Your Profile</h2>

@using (Html.BeginForm("Edit", "Profile", FormMethod.Post, new {enctype = "multipart/form-data"}))
{
    @Html.AntiForgeryToken()
    <fieldset>
        <legend>Edit your profile</legend>
    </fieldset>

    @Html.Partial("_ProfileForm")
}

@section AdditionalScripts
{
    <script>
        $(function() {
            $("#profile-upload").change(function() {
                var filesToUpload = this.files;
                if (filesToUpload.length !== 1) return;

                var file = filesToUpload[0];

                if (!file.type.match(/image.*/)) {
                    alert("only images, please");
                }

                var img = document.getElementById("profile-picture");
                img.src = window.URL.createObjectURL(file);
            });
        });
    </script>
}
